# ğŸ›’ Order Management System

## ğŸ“‹ Tá»•ng quan dá»± Ã¡n

**Order Management System** lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ Ä‘Æ¡n hÃ ng hiá»‡n Ä‘áº¡i Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i kiáº¿n trÃºc **microservices**. Há»‡ thá»‘ng bao gá»“m frontend React vÃ  backend NestJS, cung cáº¥p giáº£i phÃ¡p toÃ n diá»‡n cho viá»‡c quáº£n lÃ½ Ä‘Æ¡n hÃ ng vÃ  xá»­ lÃ½ thanh toÃ¡n.

## ğŸ—ï¸ Kiáº¿n trÃºc há»‡ thá»‘ng

```
Order Management System
â”œâ”€â”€ Frontend (React + TypeScript)
â”‚   â”œâ”€â”€ Dashboard quáº£n lÃ½ Ä‘Æ¡n hÃ ng
â”‚   â”œâ”€â”€ Táº¡o Ä‘Æ¡n hÃ ng má»›i
â”‚   â”œâ”€â”€ Chi tiáº¿t Ä‘Æ¡n hÃ ng
â”‚   â””â”€â”€ Theo dÃµi tráº¡ng thÃ¡i
â””â”€â”€ Backend (Microservices)
    â”œâ”€â”€ Order Service (NestJS + PostgreSQL)
    â”‚   â”œâ”€â”€ CRUD Ä‘Æ¡n hÃ ng
    â”‚   â”œâ”€â”€ Quáº£n lÃ½ tráº¡ng thÃ¡i
    â”‚   â””â”€â”€ Gá»­i email thÃ´ng bÃ¡o
    â””â”€â”€ Payment Service (NestJS + RabbitMQ)
        â”œâ”€â”€ Xá»­ lÃ½ thanh toÃ¡n
        â””â”€â”€ Cáº­p nháº­t tráº¡ng thÃ¡i
```

## ğŸ› ï¸ Technology Stack

### Frontend
- **React 19** - Modern UI library
- **TypeScript** - Type safety
- **Vite** - Fast build tool
- **TailwindCSS** - Utility-first CSS
- **React Query** - Server state management
- **React Hook Form + Zod** - Form handling & validation
- **Axios** - HTTP client

### Backend
- **NestJS** - Enterprise Node.js framework
- **TypeORM** - Database ORM
- **PostgreSQL** - Relational database
- **RabbitMQ** - Message queue
- **Docker** - Containerization
- **Swagger** - API documentation

## ğŸ¯ TÃ­nh nÄƒng chÃ­nh

### ğŸ“± Frontend Features
- âœ… **Dashboard Ä‘Æ¡n hÃ ng** vá»›i phÃ¢n trang vÃ  tÃ¬m kiáº¿m
- âœ… **Táº¡o Ä‘Æ¡n hÃ ng** vá»›i form validation
- âœ… **Chi tiáº¿t Ä‘Æ¡n hÃ ng** vÃ  timeline tráº¡ng thÃ¡i
- âœ… **Responsive design** cho mobile/tablet/desktop
- âœ… **Real-time notifications** vá»›i toast messages
- âœ… **Loading states** vÃ  skeleton loading
- âœ… **Error handling** toÃ n diá»‡n

### ğŸ”§ Backend Features
- âœ… **RESTful API** cho quáº£n lÃ½ Ä‘Æ¡n hÃ ng
- âœ… **Microservices architecture** vá»›i message queue
- âœ… **Database transactions** vÃ  data consistency
- âœ… **Email notifications** cho tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng
- âœ… **Error handling** vÃ  logging
- âœ… **API documentation** vá»›i Swagger
- âœ… **Docker deployment** ready

## ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng

### Quy trÃ¬nh táº¡o Ä‘Æ¡n hÃ ng:
1. **User** táº¡o Ä‘Æ¡n hÃ ng tá»« frontend
2. **Order Service** lÆ°u Ä‘Æ¡n hÃ ng vá»›i tráº¡ng thÃ¡i `CREATED`
3. **Order Service** gá»­i message qua **RabbitMQ** Ä‘áº¿n **Payment Service**
4. **Payment Service** xá»­ lÃ½ thanh toÃ¡n (simulation)
5. **Payment Service** gá»­i káº¿t quáº£ vá» **Order Service**
6. **Order Service** cáº­p nháº­t tráº¡ng thÃ¡i (`CONFIRMED`/`CANCELLED`)
7. **Order Service** gá»­i email thÃ´ng bÃ¡o
8. **Frontend** cáº­p nháº­t UI real-time

### Tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng:
- ğŸ”µ **CREATED** - ÄÆ¡n hÃ ng vá»«a Ä‘Æ°á»£c táº¡o
- ğŸŸ  **CONFIRMED** - Thanh toÃ¡n thÃ nh cÃ´ng
- ğŸŸ¢ **DELIVERED** - ÄÃ£ giao hÃ ng
- ğŸ”´ **CANCELLED** - ÄÃ£ há»§y Ä‘Æ¡n

## ğŸš€ Quick Start

### 1. Clone repository
```bash
git clone <repository-url>
```

### 2. Setup Backend
```bash
cd backend

# Cháº¡y vá»›i Docker (Khuyáº¿n nghá»‹)
docker-compose up -d

# Hoáº·c cháº¡y manual
cd order-service && npm install && npm run dev
cd payment-service && npm install && npm run dev
```

### 3. Setup Frontend
```bash
cd frontend
npm install
npm run dev
```

### 4. Truy cáº­p á»©ng dá»¥ng
- **Frontend**: http://localhost:5173
- **Order API**: http://localhost:8001
- **Payment API**: http://localhost:8002
- **API Docs**: http://localhost:8001/api/docs

## ğŸ“ Cáº¥u trÃºc dá»± Ã¡n

```
order-management-system/
â”œâ”€â”€ README.md                   # File nÃ y
â”œâ”€â”€ backend/                    # Backend microservices
â”‚   â”œâ”€â”€ README.md              # Backend documentation
â”‚   â”œâ”€â”€ docker-compose.yml     # Docker orchestration
â”‚   â”œâ”€â”€ order-service/         # Service quáº£n lÃ½ Ä‘Æ¡n hÃ ng
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ orders/        # Orders domain
â”‚   â”‚   â”‚   â”œâ”€â”€ database/      # DB configuration
â”‚   â”‚   â”‚   â”œâ”€â”€ mail/          # Email service
â”‚   â”‚   â”‚   â””â”€â”€ exception/     # Error handling
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ payment-service/       # Service xá»­ lÃ½ thanh toÃ¡n
â”‚       â”œâ”€â”€ src/payment/
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ package.json
â””â”€â”€ frontend/                   # React frontend
    â”œâ”€â”€ README.md              # Frontend documentation
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ pages/             # Page components
    â”‚   â”œâ”€â”€ components/        # Reusable components
    â”‚   â”œâ”€â”€ hooks/             # Custom hooks
    â”‚   â”œâ”€â”€ libs/              # API & utilities
    â”‚   â””â”€â”€ types/             # TypeScript types
    â”œâ”€â”€ package.json
    â””â”€â”€ vite.config.ts
```

## ğŸ”§ Development

### Environment Variables

**Backend (.env):**
```env
# Database
DATABASE_URL=postgres://root:password@localhost:5432/orders

# RabbitMQ
RABBITMQ_URL=amqp://root:password@localhost:5672

# Email (Gmail)
MAIL_HOST=smtp.gmail.com
MAIL_USER=your-email@gmail.com
MAIL_PASS=your-app-password
```

**Frontend (.env):**
```env
VITE_API_BASE_URL=http://localhost:8001/api/v1
VITE_DEBUG=true
```

### Available Scripts

#### Backend
```bash
npm run dev          # Development mode
npm run build        # Build production
npm run start:prod   # Start production
npm run test         # Run tests
npm run lint         # ESLint
```

#### Frontend
```bash
npm run dev          # Development server
npm run build        # Build for production
npm run preview      # Preview production build
npm run lint         # ESLint
```

## ğŸ“¡ API Endpoints

### Order Service (Port 8001)
```
GET    /api/v1/orders           # Láº¥y danh sÃ¡ch Ä‘Æ¡n hÃ ng
POST   /api/v1/orders           # Táº¡o Ä‘Æ¡n hÃ ng má»›i
GET    /api/v1/orders/:id       # Chi tiáº¿t Ä‘Æ¡n hÃ ng
PUT    /api/v1/orders/:id/cancel # Há»§y Ä‘Æ¡n hÃ ng
POST   /api/v1/orders/:id/retry-payment # Thá»­ láº¡i thanh toÃ¡n
```

### Payment Service (Port 8002)
- Internal microservice communication via RabbitMQ
- No public API endpoints

## ğŸ“Š Database Schema

### Orders Table
```sql
CREATE TABLE orders (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    userId VARCHAR NOT NULL,
    productName VARCHAR NOT NULL,
    amount DECIMAL(10,2) NOT NULL,
    status VARCHAR NOT NULL,
    createdAt TIMESTAMP DEFAULT NOW(),
    updatedAt TIMESTAMP DEFAULT NOW()
);
```

## ğŸ§ª Testing

```bash
# Backend tests (basic setup cÃ³ sáºµn)
cd backend/order-service
npm run test
npm run test:e2e

# Frontend tests (chÆ°a cÃ³ setup)
cd frontend
# npm run test (chÆ°a cÃ³)
```

## ğŸš€ Production Deployment

### Prerequisites
- Docker & Docker Compose
- PostgreSQL database
- RabbitMQ server
- Email SMTP service

### Deployment Steps
1. **Setup environment variables**
2. **Build production images**
3. **Deploy with docker-compose**


## ğŸ” Security

### Backend Security
- **CORS** configuration
- **Input validation** vá»›i class-validator
- **Error handling** khÃ´ng expose sensitive info

### Frontend Security
- **Environment variables** cho config
- **XSS protection** vá»›i React's built-in escaping
- **Input sanitization**

## ğŸ“ˆ Performance

### Backend Optimization
- **Connection pooling** cho PostgreSQL
- **Message queue** cho async processing

### Frontend Optimization
- **Bundle optimization** vá»›i Vite
- **Caching** vá»›i React Query

## ğŸ¤ Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Create Pull Request

### Development Guidelines
- Follow TypeScript best practices
- Write meaningful commit messages
- Add tests for new features
- Update documentation
- Follow existing code style

## ğŸ“š Documentation

- [Backend Documentation](./backend/README.md)
- [Frontend Documentation](./frontend/README.md)
- [API Documentation](http://localhost:8001/api/docs) (when running)

## ğŸ› Troubleshooting

### Common Issues

**Backend khÃ´ng start:**
- Check PostgreSQL connection
- Verify environment variables
- Check port conflicts

**Frontend khÃ´ng connect Ä‘áº¿n API:**
- Verify VITE_API_BASE_URL
- Check CORS configuration
- Ensure backend is running

**Database connection errors:**
- Check PostgreSQL is running
- Verify DATABASE_URL format
- Check network connectivity

**RabbitMQ connection issues:**
- Ensure RabbitMQ is running
- Verify RABBITMQ_URL
- Check queue configuration

